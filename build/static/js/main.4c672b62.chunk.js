(this["webpackJsonpchatbox-app"]=this["webpackJsonpchatbox-app"]||[]).push([[0],{163:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(41),o=a.n(r),c=(a(85),a(77)),i=a(17),l=a(18),u=a(20),m=a(19),p=a(21),h=(a(86),a(87),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={message:"",length:a.props.length},a.createMessage=function(){var e=a.props,t=e.addMessage,n=e.pseudo,s=e.length;t({pseudo:n,message:a.state.message}),a.setState({message:"",length:s})},a.handleSubmit=function(e){e.preventDefault(),a.createMessage()},a.handleChange=function(e){var t=e.target.value,n=a.props.length-t.length;a.setState({message:t,length:n})},a.handleKeyUp=function(e){"Enter"===e.key&&a.createMessage()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},s.a.createElement("textarea",{value:this.state.message,onChange:this.handleChange,onKeyUp:this.handleKeyUp,required:!0,maxLength:this.props.length}),s.a.createElement("div",{className:"info"},this.state.length),s.a.createElement("button",{type:"submit"},"Envoyer!"))}}]),t}(n.Component)),g=function(e){var t=e.pseudo,a=e.message;return(0,e.isUser)(t)?s.a.createElement("p",{className:"user-message"},a):s.a.createElement("p",{className:"not-user-message"},s.a.createElement("strong",null,t,": "),a)},d=a(78),f=a.n(d),b=a(42),v=a.n(b),y=(a(150),v.a.initializeApp({apiKey:"AIzaSyBKufOu70yt4FDO3G5itdPr9DqNn3iXNmw",authDomain:"chatbox-app-d7e4f.firebaseapp.com",databaseURL:"https://chatbox-app-d7e4f.firebaseio.com"}),f.a.createClass(v.a.database())),O=a(56);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var j=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={messages:{},pseudo:a.props.match.params.pseudo},a.messagesRef=Object(n.createRef)(),a.addMessage=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state.messages);t["message-".concat(Date.now())]=e,Object.keys(t).slice(0,-10).forEach((function(e){t[e]=null})),a.setState({messages:t})},a.isUser=function(e){return e===a.state.pseudo},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){y.syncState("/",{context:this,state:"messages"})}},{key:"componentDidUpdate",value:function(){var e=this.messagesRef.current;e.scrollTop=e.scrollHeight}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.messages).map((function(t){return s.a.createElement(O.CSSTransition,{timeout:200,classNames:"fade",key:t},s.a.createElement(g,{isUser:e.isUser,message:e.state.messages[t].message,pseudo:e.state.messages[t].pseudo}))}));return s.a.createElement("div",{className:"box"},s.a.createElement("div",null,s.a.createElement("div",{className:"messages",ref:this.messagesRef},s.a.createElement(O.TransitionGroup,{className:"message"},t))),s.a.createElement(h,{length:140,pseudo:this.state.pseudo,addMessage:this.addMessage}))}}]),t}(n.Component),w=a(164),S=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={pseudo:"",goToChat:!1},a.handleChange=function(e){var t=e.target.value;a.setState({pseudo:t})},a.handleSubmit=function(e){e.preventDefault(),a.setState({goToChat:!0})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state.goToChat?s.a.createElement(w.a,{push:!0,to:"/pseudo/".concat(this.state.pseudo)}):s.a.createElement("div",{className:"connexionBox"},s.a.createElement("p",{className:"connexionTitle"},"Salle de discussion"),s.a.createElement("form",{className:"connexion",onSubmit:this.handleSubmit},s.a.createElement("input",{value:this.state.pseudo,onChange:this.handleChange,placeholder:"Pseudo",type:"text",required:!0}),s.a.createElement("button",{type:"submit"},"Connexion")))}}]),t}(n.Component),x=function(){return s.a.createElement("h2",{className:"notFound"},"Y'a rien ici!")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=a(165),k=a(167),N=a(166);o.a.render(s.a.createElement((function(){return s.a.createElement(C.a,null,s.a.createElement(k.a,null,s.a.createElement(N.a,{exact:!0,path:"/",component:S}),s.a.createElement(N.a,{path:"/pseudo/:pseudo",component:j}),s.a.createElement(N.a,{component:x})))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},80:function(e,t,a){e.exports=a(163)},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.4c672b62.chunk.js.map