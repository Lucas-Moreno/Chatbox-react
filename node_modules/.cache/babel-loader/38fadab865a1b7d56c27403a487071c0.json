{"ast":null,"code":"import _defineProperty from\"/Users/easycash/Desktop/documents/projet/Chatbox-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/easycash/Desktop/documents/projet/Chatbox-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/easycash/Desktop/documents/projet/Chatbox-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/easycash/Desktop/documents/projet/Chatbox-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/easycash/Desktop/documents/projet/Chatbox-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/easycash/Desktop/documents/projet/Chatbox-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component,createRef}from'react';// STYLE\nimport'./App.css';import'./animations.css';import Formulaire from'./components/Formulaire';import Message from'./components/Message';// Firebase\nimport base from'./base';// Animations\nimport{CSSTransition,TransitionGroup}from'react-transition-group';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={messages:{},pseudo:_this.props.match.params.pseudo};_this.messagesRef=createRef();_this.addMessage=function(message){var messages=_objectSpread({},_this.state.messages);messages[\"message-\".concat(Date.now())]=message;Object.keys(messages).slice(0,-10).forEach(function(key){messages[key]=null;});_this.setState({messages:messages});};_this.isUser=function(pseudo){return pseudo===_this.state.pseudo;};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){base.syncState('/',{context:this,state:'messages'});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var ref=this.messagesRef.current;ref.scrollTop=ref.scrollHeight;}},{key:\"render\",value:function render(){var _this2=this;var messages=Object.keys(this.state.messages).map(function(key){return React.createElement(CSSTransition,{timeout:200,classNames:\"fade\",key:key},React.createElement(Message,{isUser:_this2.isUser,message:_this2.state.messages[key].message,pseudo:_this2.state.messages[key].pseudo}));});return React.createElement(\"div\",{className:\"box\"},React.createElement(\"div\",null,React.createElement(\"div\",{className:\"messages\",ref:this.messagesRef},React.createElement(TransitionGroup,{className:\"message\"},messages))),React.createElement(Formulaire,{length:140,pseudo:this.state.pseudo,addMessage:this.addMessage}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/easycash/Desktop/documents/projet/Chatbox-react/src/App.js"],"names":["React","Component","createRef","Formulaire","Message","base","CSSTransition","TransitionGroup","App","state","messages","pseudo","props","match","params","messagesRef","addMessage","message","Date","now","Object","keys","slice","forEach","key","setState","isUser","syncState","context","ref","current","scrollTop","scrollHeight","map"],"mappings":"0yDAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,SAA3B,KAA4C,OAA5C,CACA;AACA,MAAO,WAAP,CACA,MAAO,kBAAP,CAGA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CAEA;AACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CAEA;AACA,OACEC,aADF,CAEEC,eAFF,KAGO,wBAHP,C,GAKMC,CAAAA,G,mXACJC,K,CAAQ,CACNC,QAAQ,CAAE,EADJ,CAENC,MAAM,CAAE,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,MAF1B,C,OAKRI,W,CAAcb,SAAS,E,OAcvBc,U,CAAa,SAAAC,OAAO,CAAI,CACtB,GAAMP,CAAAA,QAAQ,kBAAQ,MAAKD,KAAL,CAAWC,QAAnB,CAAd,CAEAA,QAAQ,mBAAYQ,IAAI,CAACC,GAAL,EAAZ,EAAR,CAAoCF,OAApC,CACAG,MAAM,CACHC,IADH,CACQX,QADR,EAEGY,KAFH,CAES,CAFT,CAEY,CAAC,EAFb,EAGGC,OAHH,CAGW,SAAAC,GAAG,CAAI,CACdd,QAAQ,CAACc,GAAD,CAAR,CAAgB,IAAhB,CACD,CALH,EAOA,MAAKC,QAAL,CAAc,CAAEf,QAAQ,CAARA,QAAF,CAAd,EACD,C,OAEDgB,M,CAAS,SAAAf,MAAM,QAAIA,CAAAA,MAAM,GAAK,MAAKF,KAAL,CAAWE,MAA1B,E,4FA1BM,CACnBN,IAAI,CAACsB,SAAL,CAAe,GAAf,CAAoB,CAClBC,OAAO,CAAE,IADS,CAElBnB,KAAK,CAAE,UAFW,CAApB,EAID,C,+DAEqB,CACpB,GAAMoB,CAAAA,GAAG,CAAG,KAAKd,WAAL,CAAiBe,OAA7B,CACAD,GAAG,CAACE,SAAJ,CAAgBF,GAAG,CAACG,YAApB,CACD,C,uCAkBS,iBACR,GAAMtB,CAAAA,QAAQ,CAAGU,MAAM,CACpBC,IADc,CACT,KAAKZ,KAAL,CAAWC,QADF,EAEduB,GAFc,CAEV,SAAAT,GAAG,QACN,qBAAC,aAAD,EACE,OAAO,CAAE,GADX,CAEE,UAAU,CAAC,MAFb,CAGE,GAAG,CAAEA,GAHP,EAIE,oBAAC,OAAD,EACE,MAAM,CAAE,MAAI,CAACE,MADf,CAEE,OAAO,CAAE,MAAI,CAACjB,KAAL,CAAWC,QAAX,CAAoBc,GAApB,EAAyBP,OAFpC,CAGE,MAAM,CAAE,MAAI,CAACR,KAAL,CAAWC,QAAX,CAAoBc,GAApB,EAAyBb,MAHnC,EAJF,CADM,EAFO,CAAjB,CAcA,MACE,4BAAK,SAAS,CAAC,KAAf,EACE,+BACE,2BAAK,SAAS,CAAC,UAAf,CAA0B,GAAG,CAAE,KAAKI,WAApC,EACE,oBAAC,eAAD,EAAiB,SAAS,CAAC,SAA3B,EACIL,QADJ,CADF,CADF,CADF,CAQE,oBAAC,UAAD,EACE,MAAM,CAAE,GADV,CAEE,MAAM,CAAE,KAAKD,KAAL,CAAWE,MAFrB,CAGE,UAAU,CAAE,KAAKK,UAHnB,EARF,CADF,CAeD,C,iBAlEef,S,EAqElB,cAAeO,CAAAA,GAAf","sourcesContent":["import React, { Component, createRef } from 'react'\n// STYLE\nimport './App.css'\nimport './animations.css'\n\n\nimport Formulaire from './components/Formulaire'\nimport Message from './components/Message'\n\n// Firebase\nimport base from './base'\n\n// Animations\nimport {\n  CSSTransition,\n  TransitionGroup\n} from 'react-transition-group'\n\nclass App extends Component {\n  state = {\n    messages: {},\n    pseudo: this.props.match.params.pseudo\n  }\n\n  messagesRef = createRef()\n\n  componentDidMount () {\n    base.syncState('/', {\n      context: this,\n      state: 'messages'\n    })\n  }\n\n  componentDidUpdate () {\n    const ref = this.messagesRef.current\n    ref.scrollTop = ref.scrollHeight\n  }\n\n  addMessage = message => {\n    const messages = { ...this.state.messages }\n\n    messages[`message-${Date.now()}`] = message\n    Object\n      .keys(messages)\n      .slice(0, -10)\n      .forEach(key => {\n        messages[key] = null\n      })\n\n    this.setState({ messages })\n  }\n\n  isUser = pseudo => pseudo === this.state.pseudo\n\n  render () {\n    const messages = Object\n      .keys(this.state.messages)\n      .map(key => (\n        <CSSTransition\n          timeout={200}\n          classNames='fade'\n          key={key}>\n          <Message\n            isUser={this.isUser}\n            message={this.state.messages[key].message}\n            pseudo={this.state.messages[key].pseudo} />\n        </CSSTransition>\n      ))\n\n    return (\n      <div className='box'>\n        <div>\n          <div className='messages' ref={this.messagesRef}>\n            <TransitionGroup className='message'>\n              { messages }\n            </TransitionGroup>\n          </div>\n        </div>\n        <Formulaire\n          length={140}\n          pseudo={this.state.pseudo}\n          addMessage={this.addMessage} />\n      </div>\n    )\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}